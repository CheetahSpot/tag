<!DOCTYPE html>
<html>
  <head>
    <title>Spot Test</title>

    <!-- Sample of custom inline code -->
    <script>
      // Initialize data layer so events can be pushed even before spot.js loads
      var spot_data = [];
      // Create a convenience funtion to push events
      function pushEvent(evt) {
        spot_data.push(evt);
      }
      // Push config to data layer
      pushEvent({ "config": { apiHost: "https://growingtree.demostellar.com", apiAuth: "Bearer 7ed9828b0021035c22f1b142db14704bc4eb95b11f93d973bd9c9b698cf736e4:3e1824ff3ec2d7e2e20c13fa00d60d4dbc4a965d5fd48a1f4887338759c1d8e7:6d228e44e479cca02776f2d8b5a0f191e09a0e0fe7bdfa84b7a43152820d9403" } });
      // Push a web visit event to the data layer
      pushEvent({ "type": 'web', "params": { "subtype": "visit", "url": document.location.href, "referrer": document.referrer } });

      // Define some events I want to capture
      var customEvents = {
        "add_to_cart":      { type: "cart", "params": { 'subtype': 'add', 'item': 'sammich' } },
        "remove_from_cart": { type: "cart", "params": { 'subtype': 'remove', 'item': 'sammich' } },
        "cart_checkout":    { type: "cart", "params": { 'subtype': 'checkout', 'item': 'sammich' } },
        "user":             { type: "user", "params": { 'ut': 'INT00001', 'utField': 'integration_id', 'visitor': false, 'dnt': false } },
        "signin":           { type: "signin", "params": { 'subtype': 'signin', 'ut': 'INT00001', 'utAttr': 'integration_id' } },
        "signout":          { type: "signout" },
        "optin":            { type: "optin" },
        "optout":           { type: "optout" }
      }

      // Trigger on button click
      document.addEventListener('click', function (event) {
        if (event.target.matches('.btn')) {
          event.preventDefault();
          console.log("custom button click id =", event.target.id, event.target);
          let evt = customEvents[event.target.id];
          if (!evt) {
            evt = { type: event.target.id };
          }
          pushEvent(evt);
        }
      }, false);

    </script>
    <!-- End sample code -->

    <!-- Spot Script -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'spot.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://cheetahspot.github.io/tag/spot.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','SPOT-000001');</script>
    <!-- End Spot Script -->

    <!-- make the page look nice -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="https://v4-alpha.getbootstrap.com/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://v4-alpha.getbootstrap.com/examples/narrow-jumbotron/narrow-jumbotron.css">
  </head>
  <body>
    <div class="container">

      <div class="header clearfix">
        <nav>
          <ul class="nav nav-pills float-right">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="gtm.html">GTM</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="cust100.html">Inline C100</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="growingtree.html">Inline GT</a>
            </li>
          </ul>
        </nav>
        <h3 class="text-muted">Spot Test</h3>
      </div>

      <div class="jumbotron">
        <h1>Spot Test - Inline (GrowingTree)</h1>
        <p class="lead">This is a test of Spot using inline code.
        View page source to see the code.
        <br><br>
        The first event is pushed on page visit:</p>
        <code>spot_data.push({ "type": "web", "params": { "subtype": "visit",  "url": "https://...", "referrer": "https://..." }})</code>
      </div>

      <div class="jumbotron">
        <h1>Cart</h1>
        <p class="lead">Click buttons to trigger events to test abandoned cart.
          Each button pushes an event onto the data layer.
          Spot detects updates to the data layer and submits EDP Events.
        </p>
        <p>
          <a class="btn btn-lg btn-primary" href="#" id="add_to_cart" role="button">Add to Cart</a>
          <a class="btn btn-lg btn-info" href="#" id="remove_from_cart" role="button">Remove from Cart</a>
          <a class="btn btn-lg btn-success" href="#" id="cart_checkout" role="button">Checkout</a>
        </p>
      </div>

      <div class="jumbotron">
        <h1>User Identification</h1>
        <p class="lead">If a user signs in or is otherwise identified, a "match" is made between their anonymous and known records.</p>
        <p>
          <a class="btn btn-lg btn-primary" href="#" id="user" role="button" onclick="">Identify</a>
          <a class="btn btn-lg btn-success" href="#" id="signin" role="button" onclick="">Sign in</a>
          <a class="btn btn-lg btn-warning" href="#" id="signout" role="button">Sign out</a>
        </p>
      </div>

      <div class="jumbotron">
        <h1>Opt-in</h1>
        <p class="lead">If a user opts in or opts out, a "do not track" cookie is set.</p>
        <p>
          <a class="btn btn-lg btn-success" href="#" id="optin" role="button">Opt In</a>
          <a class="btn btn-lg btn-warning" href="#" id="optout" role="button">Opt Out</a>
        </p>
      </div>
    
    </div>
  </body>
</html>
